Простое решение, если вы используете C++ 11. Вероятно, O(1) время также.